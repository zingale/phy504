<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aside: Unit Testing &mdash; PHY 504 Spring 2022 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="I/O Manipulators" href="cxx-iomanip.html" />
    <link rel="prev" title="Example: Multidimensional Contiguous Array" href="contiguous_array.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> PHY 504
          </a>
              <div class="version">
                Spring 2022
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Intro &amp; Logistics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="topics.html">Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="computing.html">Computation</a></li>
<li class="toctree-l1"><a class="reference internal" href="hello_world.html">Hello, World</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The UNIX Shell</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="why_command_line.html">Why Use the Command Line?</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell.html">Navigating the Filesystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-2.html">Create Files and Directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-3.html">Redirection and Pipes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Git and Version Control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="version_control.html">Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-setup.html">Dotfiles and the Mathlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">A Git Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-branches.html">Git Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-remotes.html">Git Remotes</a></li>
<li class="toctree-l1"><a class="reference internal" href="github.html">github</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Shell Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="shell-looping.html">Looping on the Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell-scripts.html">Shell Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions.html">File Permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="finding.html">Find and Grep</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction to Programming</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="book.html">C++ Textbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Computer Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="development-tools.html">Software Development Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="development-cycle.html">Software Development Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Structure of a C++ Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Helpful C++ Tools / Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling.html">Compiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_project.html">A First C++ Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="editors.html">Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="random-tools.html">Some Random Unix Tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cxx-datatypes.html">C++ Datatypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-vectors.html">Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-more-vectors.html">More Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-matrix-example.html">Example: Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-strings.html">Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-auto-decltype.html"><code class="docutils literal notranslate"><span class="pre">auto</span></code> and <code class="docutils literal notranslate"><span class="pre">decltype</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-structs.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-arrays.html">Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-pointers.html">Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-statements.html">Loops and If-Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-io.html">File I/O</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cxx-functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-functions-example.html">More Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-orbit-example.html">Example: Planetary Orbit</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-lambdas.html">Lambda Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-functions-planets.html">Example: Sorting Planets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Elements of Software Engineering</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="multiple-files.html">Working with Multiple Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="make.html">Makefiles</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Classes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cxx-classes-intro.html">Introduction to Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cxx-vector2d-class.html">Example: Mathematical Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contiguous_array.html">Example: Multidimensional Contiguous Array</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Aside: Unit Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#unit-tests-for-vector2d">Unit tests for <code class="docutils literal notranslate"><span class="pre">Vector2d</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#comparing-vectors">Comparing vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-tests">Writing tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#automating-with-make">Automating with make</a></li>
<li class="toctree-l2"><a class="reference internal" href="#continuous-integration-and-github">Continuous integration and github</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Digging Deeper into C++</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cxx-iomanip.html">I/O Manipulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="operators.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="floating-point.html">Floating Point</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Homework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="homework/homework1.html">Homework 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="homework/homework2.html">Homework 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="homework/homework3.html">Homework 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="homework/homework4.html">Homework 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="homework/homework5.html">Homework 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="homework/homework6.html">Homework 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="homework/homework7.html">Homework 7</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="project.html">Final Project</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PHY 504</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Aside: Unit Testing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cxx-unit-tests.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="aside-unit-testing">
<h1>Aside: Unit Testing<a class="headerlink" href="#aside-unit-testing" title="Permalink to this headline">¶</a></h1>
<p>As we write increasingly complex codes, we want some way to automate
testing to ensure that our changes don’t break the functionality.</p>
<p>There are a wide variety of tests for general codes (the Wikipedia
<a class="reference external" href="https://en.wikipedia.org/wiki/Software_testing">software testing</a>
page gives a good overview:</p>
<ul class="simple">
<li><p><em>unit testing</em> : for each of your functions, you provide one or more
tests that exercise that function alone, ensuring that it gives the
expected result.</p></li>
<li><p><em>integration testing</em> : you test the several pieces of the program
or the entire program interacting.  Since unit tests are done in isolation,
integration tests will catch issues in how the different functions work
together.</p></li>
<li><p><em>regression testing</em> : you store a “correct answer” from your code and
you run the code regularly to see if any changes have unexpectedly
changed the answer.</p></li>
</ul>
<p>For numerical algorithms, we also can discuss:</p>
<ul class="simple">
<li><p><em>convergence testing</em> : some algorithms have a formal order of
accuracy, For instance, our Euler method for integrating the orbits
is first-order accurate in time, but the RK2 algorithm in your
homework is second-order accurate in time.  In convergence testing
you varying the space or time resolution and see if you get the
expected convergence.</p></li>
<li><p><em>verification</em> and <em>validation</em> : verification asks the question “am
I solving the equations correctly?”, while validation asks “am I
solving the right equations to begin with?”  For verification, one
can compare to known analytic solutions of the set of equations you
are solving.  For validation, you will typically want to compare to
experiments to see if you are appropriately modeling all of the
physics you need.</p></li>
</ul>
<section id="unit-tests-for-vector2d">
<h2>Unit tests for <code class="docutils literal notranslate"><span class="pre">Vector2d</span></code><a class="headerlink" href="#unit-tests-for-vector2d" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are a lot of unit testing frameworks for C++ programs (for
example, <a class="reference external" href="https://github.com/catchorg/Catch2">Catch2</a>).  We are just going to
something simple here.</p>
</div>
<p>We can use the basic <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement together with a makefile target to automate testing.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">assert</span></code> will end the execution at the first failure.  We could
instead keep track of the number of failures and explicitly return
that as the return value of <code class="docutils literal notranslate"><span class="pre">main</span></code>, with <code class="docutils literal notranslate"><span class="pre">0</span></code> signifying all tests
passing.</p>
</div>
<p>We’ll do this with our <code class="docutils literal notranslate"><span class="pre">Vector2d</span></code> class.</p>
<p>The basic structure we will use is:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="c1">// create some vectors v1 and v2</span>

<span class="w">    </span><span class="c1">// do some operations on v1 and v2</span>

<span class="w">    </span><span class="c1">// assert the result</span>

<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Ideally, we’d like to be able to capture the success of our test in a
Bash script, so let’s start by checking what the return value of a
program that failed an <code class="docutils literal notranslate"><span class="pre">assert</span></code> is</p>
<p>Consider the following:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cassert&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">   </span><span class="n">assert</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Let’s build and run that, and then check the return code via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1"><span class="nb">echo</span> <span class="nv">$?</span></span>
</pre></div></div><p>On my machine, I get <code class="docutils literal notranslate"><span class="pre">134</span></code>, but the actual code may vary depending
on the compiler and OS.  The key however is that it is non-zero.  This
means that we can test for a non-zero return in a script.</p>
</section>
<section id="comparing-vectors">
<h2>Comparing vectors<a class="headerlink" href="#comparing-vectors" title="Permalink to this headline">¶</a></h2>
<p>To make life easier, we’d like to be able to check if two vectors are
equal, using <code class="docutils literal notranslate"><span class="pre">==</span></code>, and not equal, using <code class="docutils literal notranslate"><span class="pre">!=</span></code>.</p>
<p>So we want to overload those operators and add them to our class:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Vector2d</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">!=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Vector2d</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">vec</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">const</span></code> after the argument list allows these to be used on a
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">Vector2d</span></code> object.</p>
<p>These should be added directly to the class in <code class="docutils literal notranslate"><span class="pre">vector2d.H</span></code>.</p>
</section>
<section id="writing-tests">
<h2>Writing tests<a class="headerlink" href="#writing-tests" title="Permalink to this headline">¶</a></h2>
<p>Let’s write some basic tests:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-number">Listing 51 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">unit_test_vector2d.cpp</span></code></span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;vector2d.H&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cassert&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vector2d</span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// test addition</span>

<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">v1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Vector2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// test subtraction</span>

<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">v1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Vector2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">-3</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// test unary minus</span>

<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="o">-</span><span class="n">v1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Vector2d</span><span class="p">(</span><span class="mi">-2</span><span class="p">,</span><span class="w"> </span><span class="mi">-4</span><span class="p">));</span><span class="w"></span>

<span class="w">    </span><span class="c1">// test not equal</span>

<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">v1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">v2</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// test the setters and the default constructor</span>

<span class="w">    </span><span class="n">v1</span><span class="p">.</span><span class="n">set_x</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">v1</span><span class="p">.</span><span class="n">set_y</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">v1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Vector2d</span><span class="p">());</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>These tests cover most of the functionality we explicitly implemented
in <code class="docutils literal notranslate"><span class="pre">vector2d.H</span></code>.  As written, they should all pass.</p>
</section>
<section id="automating-with-make">
<h2>Automating with make<a class="headerlink" href="#automating-with-make" title="Permalink to this headline">¶</a></h2>
<p>We’d like to provide a way to automate these tests.  Our first method
will be via <code class="docutils literal notranslate"><span class="pre">make</span></code> that we can run on our own computer.</p>
<p>Let’s start with the general <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> we developed in our
<a class="reference internal" href="make.html#sec-makefiles"><span class="std std-ref">Makefiles</span></a> section.</p>
<p>We can use the <a class="reference external" href="https://www.gnu.org/software/make/manual/html_node/Shell-Function.html?">GNU make shell function</a>
to run our test and capture the return code.</p>
<p>Here’s what the rule would look like:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nf">testing</span><span class="o">:</span> <span class="n">unit_test_vector</span>2<span class="n">d</span>
     <span class="k">$(</span>shell ./unit_test_vector2d<span class="k">)</span>
     @if <span class="o">[</span> <span class="si">${</span><span class="p">.SHELLSTATUS</span><span class="si">}</span> <span class="o">==</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nb">echo</span> <span class="s2">&quot;all tests pass&quot;</span><span class="p">;</span> <span class="k">fi</span>
</pre></div>
</div>
<p>We use <code class="docutils literal notranslate"><span class="pre">$(shell</span> <span class="pre">)</span></code> to run our executable.  Then we use a Bash
<code class="docutils literal notranslate"><span class="pre">if-then</span></code> statement to check the output.  Note the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> at the
start of the line makes it so <code class="docutils literal notranslate"><span class="pre">make</span></code> doesn’t print the command
itself to the screen, just the output.</p>
<div class="admonition-try-it admonition">
<p class="admonition-title">try it…</p>
<p>Let’s make a test fail in our <code class="docutils literal notranslate"><span class="pre">unit_test_vector2d.cpp</span></code> and make sure that this still works.</p>
</div>
</section>
<section id="continuous-integration-and-github">
<h2>Continuous integration and github<a class="headerlink" href="#continuous-integration-and-github" title="Permalink to this headline">¶</a></h2>
<p>For a large project, with multiple developers, we often want to ensure
that any changes that they make to the code still pass all of the
tests before we merge it into the <code class="docutils literal notranslate"><span class="pre">main</span></code> git branch.  This is called
<em>continuous integration</em>.  Github has a feature called <a class="reference external" href="https://docs.github.com/en/actions">Github actions</a> that allow us to set up simple
scripts that run on all pull requests.</p>
<p>We’ll look at how this can work – this is a high level overview of
the process that we will experiment with.  Usually one of the main
developers of a large project will have already implemented the
testing.</p>
<p>We’ll use this repository: <a class="reference external" href="https://github.com/phy504-sbu/unit_tests">https://github.com/phy504-sbu/unit_tests</a></p>
<p>There are a few places to look:</p>
<ul>
<li><p>The github action itself is a <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a> file:
<a class="reference external" href="https://github.com/phy504-sbu/unit_tests/blob/main/.github/workflows/cxx-unit-tests.yml">https://github.com/phy504-sbu/unit_tests/blob/main/.github/workflows/cxx-unit-tests.yml</a></p>
<p>This is placed in the repository in the <code class="docutils literal notranslate"><span class="pre">.github/workflows/</span></code> directory</p>
</li>
<li><p>The action runs on all pull requests.  You can see the status of all actions
that have run here: <a class="reference external" href="https://github.com/phy504-sbu/unit_tests/actions">https://github.com/phy504-sbu/unit_tests/actions</a></p></li>
</ul>
<div class="admonition-try-it admonition">
<p class="admonition-title">try it…</p>
<p>Let’s break the code and issue a pull request to see the action in action…</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A Github action is used to build this lecture notes from the ReST source
in the lecture note repo: <a class="reference external" href="https://github.com/zingale/phy504">https://github.com/zingale/phy504</a></p>
<p>This is that action: <a class="reference external" href="https://github.com/zingale/phy504/blob/main/.github/workflows/gh-pages.yml">https://github.com/zingale/phy504/blob/main/.github/workflows/gh-pages.yml</a></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="contiguous_array.html" class="btn btn-neutral float-left" title="Example: Multidimensional Contiguous Array" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cxx-iomanip.html" class="btn btn-neutral float-right" title="I/O Manipulators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Michael Zingale.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  


</body>
</html>